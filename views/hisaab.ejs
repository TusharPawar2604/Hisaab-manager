<%- include('./partials/header.ejs') %>
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-10">

        <!-- Back Link -->
        <a href="/profile"
            class="inline-flex items-center gap-2 text-slate-500 hover:text-blue-600 transition-colors mb-6 font-medium">
            <i class="ri-arrow-left-line"></i> Back to Dashboard
        </a>

        <div class="bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden relative">
            <!-- Decoration -->
            <div class="absolute top-0 right-0 p-8 opacity-5">
                <i class="ri-booklet-line text-9xl"></i>
            </div>

            <div class="p-6 sm:p-10 relative z-10">
                <!-- Header Section -->
                <div
                    class="flex flex-col md:flex-row md:items-start justify-between gap-6 mb-8 border-b border-slate-100 pb-8">
                    <div>
                        <div class="flex items-center gap-3 mb-2 text-sm text-slate-500 font-medium">
                            <span class="flex items-center gap-1"><i class="ri-calendar-event-line"></i>
                                <%= hisaab.createdAt.getDate() %>
                                    <%= ["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][hisaab.createdAt.getMonth()]
                                        %>
                                        <%= hisaab.createdAt.getFullYear() %>
                            </span>
                            <% if(hisaab.encrypted){ %>
                                <span class="w-1 h-1 bg-slate-300 rounded-full"></span>
                                <span class="text-blue-600 flex items-center gap-1"><i class="ri-lock-2-fill"></i>
                                    Encrypted</span>
                                <% } %>
                        </div>
                        <h1 class="text-3xl sm:text-4xl font-bold text-slate-800 break-words leading-tight">
                            <%= hisaab.title %>
                        </h1>
                    </div>

                    <!-- Actions -->
                    <div class="flex flex-wrap gap-3">
                        <button
                            class="sharebtn group flex items-center gap-2 px-4 py-2 bg-slate-50 hover:bg-slate-100 text-slate-700 rounded-lg border border-slate-200 transition-all font-medium text-sm">
                            <i class="ri-share-forward-line group-hover:text-blue-600 transition-colors"></i>
                            <span id="Urlbtn">Share Link</span>
                        </button>

                        <a href="/hisaab/edit/<%= hisaab._id %>"
                            class="flex items-center gap-2 px-4 py-2 bg-amber-50 hover:bg-amber-100 text-amber-700 rounded-lg border border-amber-200 transition-all font-medium text-sm">
                            <i class="ri-edit-line"></i> Edit
                        </a>

                        <a href="/hisaab/delete/<%= hisaab._id %>"
                            onclick="return confirm('Are you sure you want to delete this Hisaab?')"
                            class="flex items-center gap-2 px-4 py-2 bg-rose-50 hover:bg-rose-100 text-rose-700 rounded-lg border border-rose-200 transition-all font-medium text-sm">
                            <i class="ri-delete-bin-line"></i> Delete
                        </a>
                    </div>
                </div>

                <!-- Content -->
                <div class="prose prose-slate max-w-none">
                    <p class="whitespace-pre-wrap text-slate-700 text-lg leading-relaxed">
                        <%= hisaab.description %>
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- Copied Toast -->
    <div
        class="copieddiv hidden fixed top-24 left-1/2 -translate-x-1/2 px-4 py-2 bg-slate-800 text-white rounded-full shadow-lg text-sm font-medium flex items-center gap-2 animate-in fade-in zoom-in duration-200 z-50">
        <i class="ri-checkbox-circle-line text-emerald-400"></i> Link copied to clipboard
    </div>

    <script>
        var timer;
        const sharebtn = document.querySelector(".sharebtn");
        sharebtn.addEventListener("click", function (e) {
            clearTimeout(timer);

            navigator.clipboard.writeText(window.location.href);

            const toast = document.querySelector(".copieddiv");
            toast.classList.remove("hidden");

            timer = setTimeout(function () {
                toast.classList.add("hidden");
            }, 2000)
        })
    </script>